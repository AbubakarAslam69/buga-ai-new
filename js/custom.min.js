// ALL SLIDERS

function allSliders() {

    // MAIN HOME BANNER

    const swiperOptions = {
        loop: true,
        speed: 1000,
        parallax: true,
        autoplay: false,
        grabCursor: false,
        pagination: {
            element: ".swiper-pagination",
            clickable: true,
        },
        navigation: {
            nextEl: ".swiper-button-next",
            prevEl: ".swiper-button-prev",
        },
    };

    const homeSlider = new Swiper(".homeSlider", swiperOptions);

    const bgImages = document.querySelectorAll(".bg-image");
    bgImages.forEach((bgImage) => {
        const dataBackground = bgImage.getAttribute("data-background");
        if (dataBackground) {
            bgImage.style.backgroundImage = `url(${dataBackground})`;
        }
    });

    // OTHER SLIDERS

    var logoSlider = new Swiper(".logoSlider", {
        loop: true,
        autoplay: true,
        slidesPerView: 1,
        // If we need pagination

        breakpoints: {
            1024: {
                slidesPerView: 7,
                spaceBetween: 60,
            },
            768: {
                slidesPerView: 6,
                spaceBetween: 20,
            },
            640: {
                slidesPerView: 5,
                spaceBetween: 15,
            },
            576: {
                slidesPerView: 3,
                spaceBetween: 10,
            },
            375: {
                slidesPerView: 2,
                spaceBetween: 10,
            },
        },

        // Navigation arrows
        navigation: {
            nextEl: ".swiper-button-next",
            prevEl: ".swiper-button-prev",
        },
        pagination: {
            el: ".swiper-pagination",
            // type: 'fraction'
        },

        // And if we need scrollbar
        scrollbar: {
            el: ".swiper-scrollbar",
        },
    });


}

// CUSTOM SEARCH BOX 



// GSAP PRELOADER

function preLoader() {
    const tl = gsap.timeline({
        duration: 0.1
    });
    tl.to(".preLoader.black > img", {
            y: 50,
            autoAlpha: 0,
        })
        .to(".preLoader.black", {
            yPercent: -100,
        })
        .to(".preLoader.white", {
            yPercent: -100,
        })
        .to(".preLoader", {
            css: {
                display: "none",
            },
        })
        .from(".mouse", {
            y: -50,
            autoAlpha: 0,
        })
        .from(".navbar-brand > img", {
            x: -50,
            autoAlpha: 0,
        }, "-=1")
        .from(".navbar-nav > li, .form-inline a", {
            autoAlpha: 0,
            x: 100,
            stagger: 0.05,
        }, "-=1")
        .from(".slideOne, .roboImg", {
            autoAlpha: 0,
            yPercent: 100,
            stagger: 0.05,
        }, "-=1");
}

//  CUSTOM MOUSE CURSOR

// function mouseCursor() {
//     if ($("body")) {
//         const e = document.querySelector(".cursor-inner"),
//             t = document.querySelector(".cursor-outer");
//         let n,
//             i = 0,
//             o = !1;
//         (window.onmousemove = function (s) {
//             o ||
//                 (t.style.transform =
//                     "translate(" + s.clientX + "px, " + s.clientY + "px)"),
//                 (e.style.transform =
//                     "translate(" + s.clientX + "px, " + s.clientY + "px)"),
//                 (n = s.clientY),
//                 (i = s.clientX);
//         }),
//         $("body").on("mouseenter", "a, img, .cursor-pointer", function () {
//                 e.classList.add("cursor-hover"), t.classList.add("cursor-hover");
//             }),
//             $("body").on("mouseleave", "a, img, .cursor-pointer", function () {
//                 ($(this).is("a, img") && $(this).closest(".cursor-pointer").length) ||
//                 (e.classList.remove("cursor-hover"),
//                     t.classList.remove("cursor-hover"));
//             }),
//             (e.style.visibility = "visible"),
//             (t.style.visibility = "visible");
//     }
// }

// ANCHOR VOID MANIPULATE #

function replaceHash() {
    document.querySelectorAll("a").forEach((a) => {
        let href = a.getAttribute("href");
        a.href = href ?
            href.startsWith("#") && href.endsWith("#") ?
            href.replace("#", "javascript:;") :
            href :
            "javascript:;";
    });
}

// GSAP IMAGE REVEAL ANIMATION

function imgRevealer() {
    let revealContainers = document.querySelectorAll(".reveal");

    revealContainers.forEach((container) => {
        let image = container.querySelector("img");
        let revelerTl = gsap.timeline({
            scrollTrigger: {
                // scroller: '[data-scroll-container]',
                trigger: container,
                toggleActions: "restart none none reverse",
            },
        });

        revelerTl.set(container, {
            autoAlpha: 1
        });
        revelerTl.from(container, 0.75, {
            xPercent: -100,
            ease: Power2.out,
        });
        revelerTl.from(image, 0.75, {
            xPercent: 100,
            scale: 1.3,
            delay: -0.75,
            ease: Power2.out,
        });
    });
}

// GSAP HEADING ANIMATION

function headingAnimation() {
    const headings = document.querySelectorAll(":is(.aboutAgent, .tailoredDiv) h2, .faqHead h2 span");
    const subHeading = document.querySelectorAll(".subHeading");

    headings.forEach((text) => {
        let text1 = new SplitType(text, {
            types: "chars",
        });
        const headingTl = gsap.timeline({
            scrollTrigger: {
                trigger: text,
                toggleActions: "play none none reset",
            },
        });
        let chars = text.querySelectorAll(".char");
        headingTl.from(chars, 1.2, {
            y: 80,
            opacity: 0,
            scale: 1.2,
            rotationX: -90,
            transformOrigin: "bottom center",
            stagger: 0.05,
            ease: "expo.out",
        });
    });

    subHeading.forEach((text) => {
        let text1 = new SplitType(text, {
            types: "chars",
        });
        const subHeadingTl = gsap.timeline({
            scrollTrigger: {
                trigger: text,
                toggleActions: "play none none reset",
            },
        });
        let chars = text.querySelectorAll(".char");
        subHeadingTl.from(chars, 1.2, {
            y: -80, // Changed to negative value
            opacity: 0,
            scale: 1.2,
            rotationX: 90, // Adjusted to rotate from the top
            transformOrigin: "top center", // Changed to match the new direction
            stagger: 0.1,
            ease: "expo.out",
        });
    });
}


function btnHover() {
    const buttons = gsap.utils.toArray(".themeBtn");
    buttons.forEach((item) => {
        let text1 = new SplitType(item, {
            types: "chars",
        });
        let chars = item.querySelectorAll(".char");
        let tl = gsap.timeline({
            paused: true,
        });

        tl.to(chars, {
            duration: 0.5,
            yPercent: -200,
            ease: "power2.in",
        });
        tl.set(chars, {
            yPercent: 200,
        });
        tl.to(chars, {
            duration: 0.5,
            yPercent: 0,
            stagger: 0.1,
            ease: "back.inOut(3)",
        });

        item.addEventListener("mouseenter", () => tl.play(0));
    });
}

// LENIS SETUP

function lenissetup() {
    const lenis = new Lenis({
        duration: 1.5,
        easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),
        smooth: true,
        mouseMultiplier: 1,
    });

    function raf(time) {
        lenis.raf(time);
        requestAnimationFrame(raf);
    }
    requestAnimationFrame(raf);
    document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            lenis.scrollTo(this.getAttribute("href"));
        });
    });
    lenis.scrollTo("top");
}

// Function Initialization
function initializeFunctions() {
    preLoader();
    allSliders();
    // mouseCursor();
    // searchBox();
    replaceHash();

    // Animation EFFECTs
    imgRevealer();
    headingAnimation();
    btnHover()

    // LENIS 
    lenissetup();

    // AOS INIT
    AOS.init({
        duration: 1200,
        disable: 'mobile'
    });
}

// Event listener for window load
window.addEventListener("load", initializeFunctions);